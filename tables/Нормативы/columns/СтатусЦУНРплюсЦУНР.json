{
  "type": "calculated",
  "name": "СтатусЦУНРплюсЦУНР",
  "dataType": "string",
  "isDataTypeInferred": true,
  "expression": [
    "VAR tVal1='Нормативы'[Серия]",
    "VAR tVal2='Нормативы'[ВидРемонта]",
    "VAR tVal3=SWITCH('Нормативы'[ТипСпецификации],",
    "                    \"ЦУНР\",\"ЦУНР+\",",
    "                    \"ЦУНР+\",\"ЦУНР\",",
    "                    \"ЭРС\",\"ЭРС+\",",
    "                    \"ЭРС+\",\"ЭРС\",",
    "                    \"???\"",
    "            )",
    "VAR tVal33='Нормативы'[ТипСпецификации]",
    "VAR tVal4='Нормативы'[Код НСИ]",
    "VAR tVal5='Нормативы'[ЕдИзм]",
    "",
    "VAR tTable=FILTER(ALL('Нормативы'),",
    "        tVal1='Нормативы'[Серия]&&",
    "        tVal2='Нормативы'[ВидРемонта]&&",
    "        tVal3='Нормативы'[ТипСпецификации]&&",
    "        tVal4='Нормативы'[Код НСИ]&&",
    "        tVal5='Нормативы'[ЕдИзм]",
    ")",
    "",
    "VAR tCol1='Нормативы'[_Количество]",
    "VAR tCol2=AVERAGEX(tTable,'Нормативы'[_Количество])",
    "",
    "VAR tRet=ISBLANK(COUNTROWS(tTable))",
    "RETURN",
    "SWITCH(TRUE(),",
    "    tRet,\"Номенклатура имеется в \"&tVal33&\" но отсутствует в \"&tVal3,",
    "    tCol1=tCol2, \"Номенклатура имеется в \"&tVal33&\" и в \"&tVal3&\", количество равно\",",
    "    tCol1>tCOl2, \"Номенклатура имеется в \"&tVal33&\" и в \"&tVal3&\", но в меньшем количестве\",",
    "    tCol1<tCOl2, \"Номенклатура имеется в \"&tVal33&\" и в \"&tVal3&\", но в большем количестве\",",
    "    \"Неожиданный результат\"",
    ")",
    ""
  ]
}